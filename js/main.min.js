/*
 map-base 2017-06-15 
*/

function getRatings(ratings){for(var i=0;i<ratings.items.length;i++){var currentStars,currentTitle=ratings.items[i].title,currentRating=ratings.items[i].rating,currentReview=ratings.items[i].review,currentID=ratings.items[i].id;1===currentRating?currentStars="&#9733; &#9734; &#9734; &#9734; &#9734;":2===currentRating?currentStars="&#9733; &#9733; &#9734; &#9734; &#9734;":3===currentRating?currentStars="&#9733; &#9733; &#9733; &#9734; &#9734;":4===currentRating?currentStars="&#9733; &#9733; &#9733; &#9733; &#9734;":5===currentRating&&(currentStars="&#9733; &#9733; &#9733; &#9733; &#9733;");var theDiv=document.getElementById("mainDiv");document.createTextNode("Water<br>");theDiv.insertAdjacentHTML("beforeend",'<div id="contDiv_'+i+'" class="contDivs" style="display: none"><div class="titleDivs">'+currentTitle+'</div><div class="starsDivs">'+currentStars+'</div><div class="reviewDivs">'+currentReview+'</div><div class="infoDivs" id="infoDiv_'+currentID+'"></div><div id="buttonDiv_'+currentID+'" class="buttonDivs"><input type="button" id ="button_'+currentID+'" name="infoButton" class="infoButtons" value="Movie Info" onclick="showInfo(this)"></div></div>'),$("#contDiv_"+i).slideDown(200+200*i)}}function searchFunction(){var filter,cDivs,i;for(filter=document.getElementById("searchInput").value.toUpperCase(),cDivs=document.getElementById("mainDiv").getElementsByClassName("contDivs"),i=0;i<cDivs.length;i++)cDivs[i].getElementsByClassName("titleDivs")[0].innerHTML.toUpperCase().indexOf(filter)>-1?cDivs[i].style.display="":cDivs[i].style.display="none"}function showInfo(x){function doAfterJSONready(){var myDiv=document.getElementById("infoDiv_"+currentID),apiRating=apiJSON.responseJSON.vote_average,apiPoster="https://image.tmdb.org/t/p/w185/"+apiJSON.responseJSON.poster_path,apiOverview=apiJSON.responseJSON.overview,apiRuntime=apiJSON.responseJSON.runtime,apiGenres=apiJSON.responseJSON.genres[0].name,apiTagline=apiJSON.responseJSON.tagline;myDiv.style.display="none",myDiv.innerHTML="<div class='posterDivs' id='posterDiv_"+currentID+"'><img src="+apiPoster+" class='moviePoster'></div> <div class='statsDivs'>TMDB Info:<br><span class='ratingSpan'>"+apiRating+"</span><br> Average Rating<br><br>Runtime: "+apiRuntime+" min<br>Genres: "+apiGenres+"</div><div class='overviewDivs'><span class='taglineSpans'>"+apiTagline+"</span><br><br>"+apiOverview+"</div>",$(myDiv).slideDown(500)}var currentID=x.id.slice(7);document.getElementById("buttonDiv_"+currentID).innerHTML='<input type="button" id ="button_'+currentID+'" name="infoButton" class="infoButtons" value="Close Info" onclick="hideInfo(this)">';var apiJSON=$.getJSON("https://api.themoviedb.org/3/movie/"+currentID+"?api_key=e4d31f7fdc59a7db068ed627891f89e7",doAfterJSONready)}function hideInfo(x){var currentID=x.id.slice(7);document.getElementById("buttonDiv_"+currentID).innerHTML='<input type="button" id ="button_'+currentID+'" name="infoButton" class="infoButtons" value="Movie Info" onclick="showInfo(this)">';var myDiv=document.getElementById("infoDiv_"+currentID);$(myDiv).slideUp(500),setTimeout(function(){myDiv.innerHTML=""},500)}getRatings(myRatings);var firstTitle=document.getElementsByClassName("titleDivs")[0];firstTitle.insertAdjacentHTML("afterbegin","<div id=newBadge>New</div>"),setTimeout(function(){showInfo(document.getElementsByClassName("infoButtons")[0])},1e3);